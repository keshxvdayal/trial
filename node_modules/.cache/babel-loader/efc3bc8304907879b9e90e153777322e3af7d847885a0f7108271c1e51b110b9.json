{"ast":null,"code":"var ObjectComponent = require('../core/ObjectComponent');\nvar Node = require('../core/document/Node');\nvar CSS = require('../core/document/CSS');\nvar Options = require('./Options');\nvar History = require('../core/History');\nvar Event_ = require('../core/event/Event'),\n  NodeEvent = require('../core/document/NodeEvent'),\n  ComponentEvent = require('../core/ComponentEvent'),\n  OptionEvent = require('../core/OptionEvent');\nvar ObjectComponentNotifier = require('../core/ObjectComponentNotifier');\nvar STR_CHOOSE = 'Choose ...';\nfunction Select(parent, object, value, params) {\n  ObjectComponent.apply(this, arguments);\n  params = params || {};\n  params.onChange = params.onChange || this._onChange;\n  this._onChange = params.onChange;\n  var obj = this._obj,\n    key = this._key;\n  var targetKey = this._targetKey = params.target,\n    values = this._values = obj[key];\n  this._selectedIndex = -1;\n  this._selected = null;\n  var select = this._select = new Node(Node.INPUT_BUTTON);\n  select.setStyleClass(CSS.Select);\n  select.addEventListener(NodeEvent.MOUSE_DOWN, this._onOptionTrigger.bind(this));\n  if (this._hasTarget()) {\n    var targetObj = obj[targetKey] || '';\n    var i = -1;\n    while (++i < values.length) {\n      if (targetObj == values[i]) {\n        this._selected = values[i];\n      }\n    }\n    select.setProperty('value', targetObj.toString().length > 0 ? targetObj : values[0]);\n  } else {\n    select.setProperty('value', params.selected ? values[params.selected] : STR_CHOOSE);\n  }\n  this._wrapNode.addChild(select);\n  ObjectComponentNotifier.get().addEventListener(OptionEvent.TRIGGER, this, 'onOptionTrigger');\n  this.addEventListener(OptionEvent.TRIGGERED, ObjectComponentNotifier.get(), 'onOptionTriggered');\n}\nSelect.prototype = Object.create(ObjectComponent.prototype);\nSelect.prototype.constructor = Select;\nSelect.prototype.onOptionTrigger = function (e) {\n  if (e.data.origin == this) {\n    this._active = !this._active;\n    this._updateAppearance();\n    if (this._active) {\n      this._buildOptions();\n    } else {\n      Options.get().clear();\n    }\n    return;\n  }\n  this._active = false;\n  this._updateAppearance();\n};\nSelect.prototype._buildOptions = function () {\n  var options = Options.get();\n  var self = this;\n  options.build(this._values, this._selected, this._select, function () {\n    self.applyValue();\n    self._active = false;\n    self._updateAppearance();\n    self._selectedIndex = options.getSelectedIndex();\n    self._onChange(self._selectedIndex);\n    options.clear();\n  }, function () {\n    self._active = false;\n    self._updateAppearance();\n    options.clear();\n  }, false);\n};\nSelect.prototype._applySelected = function (selected) {\n  this._select.setProperty('value', selected);\n  this.dispatchEvent(new Event_(this, ComponentEvent.VALUE_UPDATED), null);\n};\nSelect.prototype.applyValue = function () {\n  var index = Options.get().getSelectedIndex(),\n    selected = this._selected = this._values[index];\n  if (this._hasTarget()) {\n    this.pushHistoryState();\n    this._obj[this._targetKey] = selected;\n  }\n  this._applySelected(selected);\n};\nSelect.prototype.pushHistoryState = function () {\n  var obj = this._obj,\n    key = this._targetKey;\n  History.get().pushState(obj, key, obj[key]);\n};\nSelect.prototype._onOptionTrigger = function () {\n  this.dispatchEvent(new Event_(this, OptionEvent.TRIGGERED, null));\n};\nSelect.prototype._updateAppearance = function () {\n  this._select.setStyleClass(this._active ? CSS.SelectActive : CSS.Select);\n};\nSelect.prototype.onValueUpdate = function (e) {\n  if (!this._hasTarget()) {\n    return;\n  }\n  this._selected = this._obj[this._targetKey];\n  this._select.setProperty('value', this._selected.toString());\n};\nSelect.prototype._hasTarget = function () {\n  return this._targetKey != null;\n};\nSelect.prototype.setValue = function (value) {\n  this._selectedIndex = value;\n  if (value == -1) {\n    this._selected = null;\n    this._select.setProperty('value', STR_CHOOSE);\n    return;\n  }\n  this._selected = this._values[this._selectedIndex];\n  this._applySelected(this._selected);\n};\nSelect.prototype.getData = function () {\n  var obj = {};\n  obj['selectedIndex'] = this._selectedIndex;\n  return obj;\n};\nmodule.exports = Select;","map":{"version":3,"names":["ObjectComponent","require","Node","CSS","Options","History","Event_","NodeEvent","ComponentEvent","OptionEvent","ObjectComponentNotifier","STR_CHOOSE","Select","parent","object","value","params","apply","arguments","onChange","_onChange","obj","_obj","key","_key","targetKey","_targetKey","target","values","_values","_selectedIndex","_selected","select","_select","INPUT_BUTTON","setStyleClass","addEventListener","MOUSE_DOWN","_onOptionTrigger","bind","_hasTarget","targetObj","i","length","setProperty","toString","selected","_wrapNode","addChild","get","TRIGGER","TRIGGERED","prototype","Object","create","constructor","onOptionTrigger","e","data","origin","_active","_updateAppearance","_buildOptions","clear","options","self","build","applyValue","getSelectedIndex","_applySelected","dispatchEvent","VALUE_UPDATED","index","pushHistoryState","pushState","SelectActive","onValueUpdate","setValue","getData","module","exports"],"sources":["/Users/jarvis/Desktop/Porfolio/KESHAV'S portfolio/Portfolio/node_modules/controlkit/lib/component/Select.js"],"sourcesContent":["var ObjectComponent = require('../core/ObjectComponent');\nvar Node = require('../core/document/Node');\nvar CSS  = require('../core/document/CSS');\n\nvar Options = require('./Options');\n\nvar History = require('../core/History');\n\nvar Event_         = require('../core/event/Event'),\n    NodeEvent      = require('../core/document/NodeEvent'),\n    ComponentEvent = require('../core/ComponentEvent'),\n    OptionEvent    = require('../core/OptionEvent');\n\nvar ObjectComponentNotifier = require('../core/ObjectComponentNotifier');\n\nvar STR_CHOOSE = 'Choose ...';\n\nfunction Select(parent, object, value, params) {\n    ObjectComponent.apply(this, arguments);\n\n    params = params || {};\n    params.onChange = params.onChange || this._onChange;\n    this._onChange = params.onChange;\n\n    var obj = this._obj,\n        key = this._key;\n\n    var targetKey = this._targetKey = params.target,\n        values = this._values = obj[key];\n\n\n    this._selectedIndex = -1;\n    this._selected = null;\n\n    var select = this._select = new Node(Node.INPUT_BUTTON);\n        select.setStyleClass(CSS.Select);\n        select.addEventListener(NodeEvent.MOUSE_DOWN, this._onOptionTrigger.bind(this));\n\n    if(this._hasTarget()) {\n        var targetObj = obj[targetKey] || '';\n        var i = -1;\n        while (++i < values.length) {\n            if (targetObj == values[i]){\n                this._selected = values[i];\n            }\n        }\n        select.setProperty('value', targetObj.toString().length > 0 ? targetObj : values[0]);\n    }\n    else {\n        select.setProperty('value', params.selected ? values[params.selected] : STR_CHOOSE);\n    }\n\n    this._wrapNode.addChild(select);\n\n    ObjectComponentNotifier.get().addEventListener(OptionEvent.TRIGGER, this, 'onOptionTrigger');\n    this.addEventListener(OptionEvent.TRIGGERED, ObjectComponentNotifier.get(), 'onOptionTriggered');\n}\nSelect.prototype = Object.create(ObjectComponent.prototype);\nSelect.prototype.constructor = Select;\n\nSelect.prototype.onOptionTrigger = function (e) {\n    if (e.data.origin == this) {\n        this._active = !this._active;\n        this._updateAppearance();\n\n        if (this._active) {\n            this._buildOptions();\n        }\n        else {\n            Options.get().clear();\n        }\n        return;\n    }\n    this._active = false;\n    this._updateAppearance();\n};\n\nSelect.prototype._buildOptions = function () {\n    var options = Options.get();\n    var self = this;\n\n    options.build(this._values, this._selected, this._select,\n        function(){\n            self.applyValue();\n            self._active = false;\n            self._updateAppearance();\n            self._selectedIndex = options.getSelectedIndex();\n            self._onChange(self._selectedIndex);\n            options.clear();\n        },\n        function(){\n            self._active = false;\n            self._updateAppearance();\n            options.clear()\n        }, false);\n};\n\nSelect.prototype._applySelected = function(selected){\n    this._select.setProperty('value',selected);\n    this.dispatchEvent(new Event_(this,ComponentEvent.VALUE_UPDATED),null);\n}\n\nSelect.prototype.applyValue = function () {\n    var index = Options.get().getSelectedIndex(),\n        selected = this._selected = this._values[index];\n\n    if (this._hasTarget()) {\n        this.pushHistoryState();\n        this._obj[this._targetKey] = selected;\n    }\n\n    this._applySelected(selected);\n};\n\nSelect.prototype.pushHistoryState = function () {\n    var obj = this._obj,\n        key = this._targetKey;\n    History.get().pushState(obj, key, obj[key]);\n};\n\nSelect.prototype._onOptionTrigger = function () {\n    this.dispatchEvent(new Event_(this, OptionEvent.TRIGGERED, null));\n};\n\nSelect.prototype._updateAppearance = function () {\n    this._select.setStyleClass(this._active ? CSS.SelectActive : CSS.Select);\n};\n\nSelect.prototype.onValueUpdate = function (e) {\n    if (!this._hasTarget()){\n        return;\n    }\n    this._selected = this._obj[this._targetKey];\n    this._select.setProperty('value', this._selected.toString());\n};\n\nSelect.prototype._hasTarget = function () {\n    return this._targetKey != null;\n};\n\nSelect.prototype.setValue = function(value){\n    this._selectedIndex = value;\n    if(value == -1){\n        this._selected = null;\n        this._select.setProperty('value', STR_CHOOSE);\n        return;\n    }\n    this._selected = this._values[this._selectedIndex];\n    this._applySelected(this._selected);\n};\n\nSelect.prototype.getData = function(){\n    var obj = {};\n        obj['selectedIndex'] = this._selectedIndex;\n    return obj;\n};\n\nmodule.exports = Select;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}