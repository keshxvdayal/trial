{"ast":null,"code":"import * as THREE from \"three\";\nimport ControlKit from \"controlkit\";\nimport { ScrollPos } from \"./Effects\";\nimport gsap from \"gsap\";\nimport { Expo } from \"gsap/all\";\nexport const lerp = (x, y, a) => x * (1 - a) + y * a;\nexport const clamp = function (val) {\n  let min = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  let max = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n  return Math.min(Math.max(val, min), max);\n};\nexport const fix = () => {\n  const s = \"#controlKit .panel .group-list .group .sub-group-list .sub-group .wrap .wrap\";\n  const c = \"#controlKit .panel .button, #controlKit .picker .button\";\n  if (document.querySelector(s)) document.querySelectorAll(s).forEach((e, i) => e.style.width = i != 3 ? \"30%\" : \"50%\");\n  if (document.querySelector(c)) {\n    document.querySelector(c).parentElement.style.float = \"none\";\n    document.querySelector(c).parentElement.style.width = \"100% \";\n  }\n  if (document.querySelector(s + \".color\")) document.querySelector(s + \".color\").parentElement.style.width = \"60%\";\n};\nexport const redraw = (elemMesh, v) => {\n  let newGeometry = new THREE.PlaneGeometry(elemMesh.geometry.parameters.width, elemMesh.geometry.parameters.height, v, v);\n  elemMesh.geometry.dispose();\n  elemMesh.geometry = newGeometry;\n};\nfunction getTranslate3d(el) {\n  var values = el.style.transform.split(/\\w+\\(|\\);?/);\n  if (!values[1] || !values[1].length) {\n    return [];\n  }\n  values = values[1].split(/,\\s?/g);\n  return values.map(c => parseFloat(c.replace('px', '')));\n}\nfunction stringify(obj) {\n  let cache = [];\n  let str = JSON.stringify(obj, function (key, value) {\n    if (typeof value === \"object\" && value !== null) {\n      if (cache.indexOf(value) !== -1) {\n        return;\n      }\n      cache.push(value);\n    }\n    return value;\n  });\n  cache = null;\n  return str;\n}\nvar isdebug = [];\nexport const init = function (elem, vertex, fragment, uniforms) {\n  let {\n    attributes,\n    camera,\n    renderer,\n    width,\n    height,\n    scene,\n    geometry,\n    opts,\n    effect = 0\n  } = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n  const o = \"#controlKit .options\";\n  let elemWidth = elem.getBoundingClientRect().width;\n  let elemHeight = elem.getBoundingClientRect().height;\n  let elemLeft = elem.getBoundingClientRect().left;\n  const mouse = new THREE.Vector2();\n  const mousem = new THREE.Vector2();\n  const src = [elem.getAttribute(\"src\") && elem.getAttribute(\"src\")];\n  let t = [elem.getAttribute(\"src\") && new THREE.TextureLoader().load(src[0])];\n  const sources = [];\n  if (elem.getAttribute(\"src\")) {\n    if (elem.nodeName.toLowerCase() === \"video\") {\n      const video = document.createElement('video');\n      video.crossOrigin = 'anonymous';\n      video.src = src[0];\n      video.muted = true;\n      video.loop = true;\n      video.preload = true;\n      video.play();\n      sources[0] = video;\n    } else {\n      const img = new Image();\n      img.crossOrigin = \"anonymous\";\n      img.src = src[0];\n      sources[0] = img;\n    }\n  }\n  const doAction = lerp => {\n    if (uniforms.currentScroll.value >= 0) {\n      uniforms.uScroll.value = THREE.MathUtils.lerp(uniforms.uScroll.value, uniforms.currentScroll.value, lerp);\n      uniforms.uSection.value = Math.floor(uniforms.uScroll.value);\n      var sec = uniforms.uSection.value;\n      if (t.length > sec) {\n        if (t.length > sec + 1) uniforms.uTexture.value = [t[sec], t[sec + 1]];else uniforms.uTexture.value = [t[t.length - 1], t[t.length - 1]];\n      }\n    }\n  };\n  var mouseWheel = new ScrollPos();\n  const staticScroll = () => {\n    if (!(elem.nodeName.toLowerCase() === \"img\") && !opts.slideStyle) {\n      mouseWheel.update();\n      mouseWheel.dampen = 0.9 + clamp(opts.damping || 7, 0, 9) / 100;\n      mouseWheel.speed = Math.abs(opts.scrollSpeed || 6);\n      mouseWheel.touchSpeed = Math.abs(opts.touchSpeed || 6);\n      let scrollTarget = Math.floor((mouseWheel.scrollPos + elemHeight * 0.5) / elemHeight) * elemHeight;\n      if (opts.scrollSnapping) {\n        mouseWheel.snap(scrollTarget);\n      }\n      let {\n        scrollPos\n      } = mouseWheel;\n      if (scrollPos < 0) {\n        scrollPos = 0;\n      }\n      if (scrollPos > 0 && scrollPos < elemHeight * (t.length - 1)) uniforms.currentScroll.value = scrollPos / elemHeight;\n    }\n  };\n  if (!(elem.nodeName.toLowerCase() === \"img\")) {\n    fragment = fragment.replace(\"!isMulti;\", opts.gooey && !opts.slideStyle === true ? /*glsl*/\"       \\n        vec2 pos=vec2(vuv.x,vuv.y/aspect);\\n        vec2 mouse=vec2(mousei.x,(mousei.y)/aspect);\\n        vec2 interpole=mix(vec2(0),vec2(metaball,noise_height),uIntercept);\\n        float noise=(snoise(vec3(pos*noise_scale,time*noise_speed))+1.)/2.;\\n        float val=noise*interpole.y;\\n        float u=1.0-smoothstep(interpole.x,.0,distance(mouse,pos));\\n        float mouseMetaball=clamp(1.-u,0.,1.);\\n        val+=mouseMetaball;\\n        float alpha=smoothstep(discard_threshold-antialias_threshold,discard_threshold,val);\\n        gl_FragColor=vec4(mix(gl_FragColor,texture2D(uTexture[1],uv2),alpha));\" : \"float c = (sin((uv.x*7.0*snoise(vec3(uv,1.0)))+(time))/15.0*snoise(vec3(uv,1.0)))+.01;\\n      float blend=uScroll-uSection;float blend2=1.-blend;vec4 imageA=texture2D(uTexture[0],vec2(uv.x,uv.y-(((texture2D(uTexture[0],uv).r*displaceAmount)*blend)*2.)))*blend2;vec4 imageB=texture2D(uTexture[1],vec2(uv.x,uv.y+(((texture2D(uTexture[1],uv).r*displaceAmount)*blend2)*2.)))*blend;\\n      gl_FragColor =scrollType == 0.0? mix(texture2D(uTexture[1], uv), texture2D(uTexture[0], uv), step((uScroll)-uSection, sin(c) + uv.y)):imageA.bbra*blend+imageA*blend2+imageB.bbra*blend2+imageB*blend;\");\n    for (let i = 0; i < elem.children.length; i++) {\n      src[i] = elem.children[i].getAttribute(\"src\");\n      t[i] = new THREE.TextureLoader().load(src[i]);\n      if (i > 0) {\n        elem.children[i].style.display = \"none\";\n      }\n      if (elem.children[i].nodeName.toLowerCase() === \"video\") {\n        const video = document.createElement('video');\n        video.crossOrigin = 'anonymous';\n        video.src = src[i];\n        video.muted = true;\n        video.loop = true;\n        video.preload = true;\n        video.play();\n        sources[i] = video;\n      } else {\n        const img = new Image();\n        img.crossOrigin = \"anonymous\";\n        img.src = src[i];\n        sources[i] = img;\n      }\n    }\n  }\n  Object.assign(uniforms, {\n    zindex: {\n      value: -9996999,\n      range: [-9999999, 9999999]\n    },\n    aspect: {\n      value: elemWidth / elemHeight\n    },\n    ignoreShapeAspect: {\n      value: true\n    },\n    shapePosition: {\n      value: new THREE.Vector2(0.0, 0.0)\n    },\n    shapeScale: {\n      value: new THREE.Vector2(0.5, 0.5)\n    },\n    shapeEdgeSoftness: {\n      value: 0.0,\n      range: [0, .5]\n    },\n    shapeRadius: {\n      value: 0.0,\n      range: [0, 2]\n    },\n    currentScroll: {\n      value: 0\n    },\n    scrollLerp: {\n      value: 0.07\n    },\n    gooey: {\n      value: opts.gooey ? true : false\n    },\n    infiniteGooey: {\n      value: false\n    },\n    growSize: {\n      value: 4,\n      range: [1, 15]\n    },\n    durationOut: {\n      value: 1,\n      range: [.1, 5]\n    },\n    durationIn: {\n      value: 1.5,\n      range: [.1, 5]\n    },\n    time: {\n      value: 0\n    },\n    displaceAmount: {\n      value: 0.5\n    },\n    mousei: {\n      value: new THREE.Vector2()\n    },\n    mouse: {\n      value: mouse\n    },\n    masker: {\n      value: false\n    },\n    maskVal: {\n      value: 1,\n      range: [1, 5]\n    },\n    scrollType: {\n      value: 0\n    },\n    uIntercept: {\n      value: 0\n    },\n    geoVertex: {\n      range: [1, 64],\n      value: uniforms.geoVertex ? uniforms.geoVertex.value : 1\n    },\n    noEffectGooey: {\n      value: true\n    },\n    onMouse: {\n      value: 0\n    },\n    uSection: {\n      value: 0\n    },\n    isMulti: {\n      value: !(elem.nodeName.toLowerCase() === \"img\")\n    },\n    uScroll: {\n      value: 0\n    },\n    noise_speed: {\n      value: 0.2,\n      range: [0, 10]\n    },\n    metaball: {\n      value: .2,\n      range: [0, 2]\n    },\n    discard_threshold: {\n      value: 0.5,\n      range: [0, 1]\n    },\n    antialias_threshold: {\n      value: 0.002,\n      range: [0, 0.1]\n    },\n    noise_height: {\n      value: 0.5,\n      range: [0, 2]\n    },\n    noise_scale: {\n      value: 10,\n      range: [0, 100]\n    },\n    uTexture: {\n      value: elem.nodeName.toLowerCase() === \"img\" ? t : [t[0], t[1]]\n    }\n  });\n  const snoise = \"vec3 mod289(vec3 x){return x-floor(x*(1./289.))*289.;}vec4 mod289(vec4 x){return x-floor(x*(1./289.))*289.;}vec4 permute(vec4 x){return mod289(((x*34.)+1.)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1./6.,1./3.);const vec4 D=vec4(0.,.5,1.,2.);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.,i1.z,i2.z,1.))+i.y+vec4(0.,i1.y,i2.y,1.))+i.x+vec4(0.,i1.x,i2.x,1.));float n_=.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.+1.;vec4 s1=floor(b1)*2.+1.;vec4 sh=-step(h,vec4(0.));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.);m=m*m;return 42.*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}\";\n  const shapeModifier = /*glsl*/\"\\n  uniform float shapeRadius,shapeEdgeSoftness;\\n  uniform vec2  shapePosition,shapeScale; \\n  uniform bool ignoreShapeAspect ;\\n  void roundedBoxSDF() {\\n    float asc=ignoreShapeAspect?aspect:1.0; \\n    float distance = length(max(abs((vec2(vuv.x,vuv.y/asc))-vec2(shapePosition.x,shapePosition.y/asc)*1.5-vec2(.5,.5/asc)) - vec2(shapeScale.x,shapeScale.y/asc) + shapeRadius, 0.0)) - shapeRadius;\\n    float smoothedAlpha = 1.0-smoothstep(0.0, shapeEdgeSoftness/10., distance);    \\n    gl_FragColor = vec4(gl_FragColor.xyz, smoothedAlpha);}\\n  \";\n  const material = new THREE.ShaderMaterial({\n    transparent: true,\n    vertexShader: vertex.replace(\"#define SNOISEHOLDER\", snoise),\n    fragmentShader: fragment.replace(\"#define SNOISEHOLDER\", snoise).replace(\"#define SHAPEMODIFIER\", shapeModifier),\n    uniforms\n  });\n  const elemMesh = new THREE.Mesh(geometry, material);\n  elemMesh.scale.set(elemWidth, elemHeight);\n  redraw(elemMesh, uniforms.geoVertex.value);\n  elemMesh.visible = false;\n  scene.add(elemMesh);\n  var debugObj = {\n    backgroundImage: '',\n    shapePosition: [0, 0],\n    shapeScaleX: .5,\n    shapeScaleY: .5,\n    shapeScaleR: [0, 1],\n    shapePositionX: .0,\n    shapePositionY: .0,\n    shapePositionR: [-2, 2],\n    Mode: [\"Off\", \"Reflect/Glow\", \"Exclusion\", \"Difference\", \"Darken\", \"ColorBurn\", \"ColorDoge\", \"SoftLight\", \"Overlay\", \"Phoenix\", \"Add\", \"Multiply\", \"Screen\", \"Negative\", \"Divide\", \"Subtract\", \"Neon\", \"Natural\", \"Mod\", \"NeonNegative\", \"Dark\", \"Average\"],\n    \"Mode Active\": \"Soft Light\",\n    Trigo: [\"Sin\", \"Cos\", \"Tan\", \"Atan\"],\n    \"Trig A\": \"Cos\",\n    \"Trig N\": \"Sin\",\n    Mouse: [\"Off\", \"Mode 1\", \" Mode 2\", \" Mode 3\"],\n    onMouse: [\"Always Active\", \"Active On Hover\", \"Deactivate On Hover\"],\n    Active: \"Always Active\",\n    scrollType: [\"Wave\", \"Morph\"],\n    scrollTypeIs: \"Wave\",\n    \"Mouse Active\": \"Off\",\n    Color: \"#54A8FF\",\n    speed: {\n      precise: 1,\n      normal: 1,\n      range: [-500, 500],\n      rangep: [-10, 10]\n    },\n    frequency: {\n      precise: 1,\n      normal: 50,\n      range: [-800, 800],\n      rangep: [-50, 50]\n    },\n    Resolution_XY: {\n      value: 1000,\n      range: [0, 1000],\n      precise: 1,\n      rangep: [0, 100]\n    },\n    pixelStrength: {\n      precise: 1,\n      normal: 3,\n      range: [-20, 100],\n      rangep: [-20, 20]\n    },\n    strength: {\n      precise: 1,\n      normal: 0.2,\n      range: [-40, 40],\n      rangep: [-5, 5]\n    },\n    s: 0.6,\n    range: [0.1, 1],\n    f: 0.6,\n    rangep: [1, 10]\n  };\n  var controlKit = null;\n  var panel = null;\n  const config = c => {\n    c = JSON.parse(JSON.stringify(c));\n    Object.assign(uniforms, c);\n    if (c.color) c.color.value = new THREE.Color(c.color.value);\n    Object.assign(uniforms, c);\n    document.querySelector('._canvas_container').style.zIndex = uniforms.zindex.value;\n  };\n  if (opts.preset) fetch(opts.preset).then(response => response.json()).then(json => config(json));\n  if (opts.config) config(opts.config);\n  if (opts.debug && !isdebug[effect] || false) {\n    isdebug[effect] = true;\n    controlKit = new ControlKit();\n    if (opts.gooey === true) {\n      controlKit.addPanel({\n        enable: false,\n        label: \"Gooey Panel\",\n        width: 300,\n        fixed: false,\n        position: [20, 50]\n      }).addSubGroup({\n        label: 'InfiniteGooey',\n        enable: false\n      }).addCheckbox(uniforms.infiniteGooey, \"value\", {\n        label: \"Enable\"\n      }).addSlider(uniforms.growSize, \"value\", \"range\", {\n        label: \"Grow Size\",\n        step: 0.001\n      }).addSlider(uniforms.durationOut, \"value\", \"range\", {\n        label: \"Duration Out\",\n        step: 0.001\n      }).addSlider(uniforms.durationIn, \"value\", \"range\", {\n        label: \"Duration In\",\n        step: 0.001\n      }).addGroup().addCheckbox(uniforms.noEffectGooey, \"value\", {\n        label: \"GooeyBakEffect\"\n      }).addSlider(uniforms.noise_speed, \"value\", \"range\", {\n        label: \"Speed\",\n        step: 0.001\n      }).addSlider(uniforms.metaball, \"value\", \"range\", {\n        label: \"GooeyBall\",\n        step: 0.001\n      }).addSlider(uniforms.discard_threshold, \"value\", \"range\", {\n        label: \"Threshold\",\n        step: 0.001\n      }).addSlider(uniforms.antialias_threshold, \"value\", \"range\", {\n        label: \"Antialias\",\n        step: 0.001\n      }).addSlider(uniforms.noise_height, \"value\", \"range\", {\n        label: \"Height\",\n        step: 0.001\n      }).addSlider(uniforms.noise_scale, \"value\", \"range\", {\n        label: \"Scale\",\n        step: 0.001\n      });\n    }\n    panel = controlKit.addPanel({\n      enable: false,\n      label: \"Debug Panel\",\n      fixed: false,\n      position: [20, 10],\n      width: 300\n    }).addButton(\"Save To Clipboard\", () => {\n      const {\n        uScroll,\n        isMulti,\n        uSection,\n        time,\n        resolution,\n        uTexture,\n        mouse,\n        mousem,\n        mousei,\n        uIntercept,\n        ...rest\n      } = uniforms;\n      navigator.clipboard.writeText(stringify(rest)).then(() => {\n        document.querySelector('#controlKit .panel .button, #controlKit .picker .button').value = \"Copied Successfully\";\n        document.querySelector('#controlKit .panel .button, #controlKit .picker .button').style.pointerEvents = \"none\";\n        document.querySelector('body #controlKit .panel .button, #controlKit .picker .button').style.backgroundColor = \"darkgreen\";\n        document.querySelector('body #controlKit .panel .button, #controlKit .picker .button').style.color = \"white\";\n        setTimeout(() => {\n          document.querySelector('#controlKit .panel .button, #controlKit .picker .button').value = \"Save To Clipboard\";\n          document.querySelector('#controlKit .panel .button, #controlKit .picker .button').style.pointerEvents = \"initial\";\n          document.querySelector('body #controlKit .panel .button, #controlKit .picker .button').style.backgroundColor = \"#383c4a\";\n          document.querySelector('body #controlKit .panel .button, #controlKit .picker .button').style.color = \"#8c92a4\";\n        }, 1500);\n      }, () => {\n        document.querySelector('#controlKit .panel .button, #controlKit .picker .button').value = \"Failed To Copy\";\n        document.querySelector('#controlKit .panel .button, #controlKit .picker .button').style.pointerEvents = \"none\";\n        document.querySelector('body #controlKit .panel .button, #controlKit .picker .button').style.backgroundColor = \"red\";\n        document.querySelector('body #controlKit .panel .button, #controlKit .picker .button').style.color = \"white\";\n        setTimeout(() => {\n          document.querySelector('#controlKit .panel .button, #controlKit .picker .button').value = \"Save To Clipboard\";\n          document.querySelector('#controlKit .panel .button, #controlKit .picker .button').style.pointerEvents = \"initial\";\n          document.querySelector('body #controlKit .panel .button, #controlKit .picker .button').style.backgroundColor = \"#383c4a\";\n          document.querySelector('body #controlKit .panel .button, #controlKit .picker .button').style.color = \"#8c92a4\";\n        }, 1500);\n      });\n    }).addStringInput(uniforms.zindex, \"value\", {\n      label: \"Canvas Z-Index\",\n      step: 1,\n      onChange: () => document.querySelector('._canvas_container').style.zIndex = uniforms.zindex.value\n    }).addSubGroup({\n      label: 'Shape Control',\n      enable: false\n    }).addCheckbox(uniforms.ignoreShapeAspect, 'value', {\n      label: 'Ignore Shape Aspect'\n    }).addSlider(uniforms.shapeRadius, \"value\", \"range\", {\n      label: \"Radius\",\n      step: 0.001\n    }).addSlider(uniforms.shapeEdgeSoftness, \"value\", \"range\", {\n      label: \"Edge Softness\",\n      step: 0.001\n    }).addSlider(debugObj, \"shapeScaleX\", \"shapeScaleR\", {\n      label: \"Scale X\",\n      step: 0.001,\n      onChange: () => uniforms.shapeScale.value.x = debugObj.shapeScaleX\n    }).addSlider(debugObj, \"shapeScaleY\", \"shapeScaleR\", {\n      label: \"Scale Y\",\n      step: 0.001,\n      onChange: () => uniforms.shapeScale.value.y = debugObj.shapeScaleY\n    }).addSlider(debugObj, \"shapePositionX\", \"shapePositionR\", {\n      label: \"Position X\",\n      step: 0.001,\n      onChange: () => uniforms.shapePosition.value.x = debugObj.shapePositionX\n    }).addSlider(debugObj, \"shapePositionY\", \"shapePositionR\", {\n      label: \"Position Y\",\n      step: 0.001,\n      onChange: () => uniforms.shapePosition.value.y = debugObj.shapePositionY\n    }).addGroup();\n    document.querySelector('body #controlKit .panel .button, #controlKit .picker .button').style.color = \"#8c92a4\";\n    if (!(elem.nodeName.toLowerCase() === \"img\") && opts.gooey != true) panel.addSelect(debugObj, \"scrollType\", {\n      target: \"scrollTypeIs\",\n      label: \"Scroll Type\",\n      onChange: x => uniforms.scrollType.value = x\n    });\n    panel.addCheckbox(uniforms.masker, \"value\", {\n      label: \"Image Zoomer\"\n    }).addSlider(uniforms.maskVal, \"value\", \"range\", {\n      label: \"Zoom level\",\n      step: 0.00001\n    });\n  }\n  const raycaster = new THREE.Raycaster();\n  let mouseCoords = new THREE.Vector2(0.5, 0.5);\n  let isMouseOverElemMesh = false;\n  const mover = event => {\n    raycaster.setFromCamera(new THREE.Vector2(event.clientX / window.innerWidth * 2 - 1, -(event.clientY / window.innerHeight) * 2 + 1), camera);\n    const intersects = raycaster.intersectObject(elemMesh);\n    if (intersects.length > 0) {\n      mouseCoords = intersects[0].uv;\n      mouse.x = intersects[0].uv.x * 2 - 1;\n      mouse.y = -intersects[0].uv.y * 2 - 1;\n      if (!isMouseOverElemMesh) isMouseOverElemMesh = true;\n    } else if (isMouseOverElemMesh) {\n      isMouseOverElemMesh = false;\n    }\n  };\n  let scrollPos = null;\n  document.addEventListener(\"mousemove\", mover);\n  document.addEventListener(\"wheel\", mover);\n  // document.addEventListener(\"wheel\", (e) => {\n  //   console.log(scrollPos != scrollY, scrollY)\n  //   if (scrollPos != scrollY) {\n  //     if (e.deltaY > 0 || !scrollPos) {\n  //       scrollPos = scrollY\n  //       mouseCoords.y -= e.deltaY / window.innerHeight\n  //     }\n  //   }\n  // })\n  let isGooeyLerping = false;\n  let currentGooey = 0;\n  function calculateGooey(i) {\n    var l = src.length;\n    return i % l;\n  }\n  if (opts.slideStyle && typeof opts.slideStyle === \"function\") opts.slideStyle(x => uniforms.currentScroll.value = x, y => uniforms.scrollLerp.value = y);\n  if (opts.setUniforms && typeof opts.setUniforms === \"function\") opts.setUniforms(uniforms);\n  const originalGooey = uniforms.metaball.value;\n  elem.addEventListener('mousedown', e => {\n    if (e.button == 0 && !isGooeyLerping && uniforms.infiniteGooey.value && opts.gooey && !opts.slideStyle) {\n      gsap.to(uniforms.metaball, {\n        value: uniforms.growSize.value,\n        duration: uniforms.durationOut.value,\n        ease: Expo.easeInOut,\n        onStart: () => {\n          isGooeyLerping = true;\n        },\n        onComplete: () => {\n          currentGooey++;\n          uniforms.metaball.value = 0;\n          isGooeyLerping = false;\n          uniforms.uTexture.value = [t[calculateGooey(currentGooey)], t[calculateGooey(currentGooey + 1)]];\n          gsap.to(uniforms.metaball, {\n            value: originalGooey,\n            ease: Expo.easeInOut,\n            duration: uniforms.durationIn.value\n          });\n        }\n      });\n    }\n  });\n  document.addEventListener(\"mousemove\", e => {\n    const centerX = window.innerWidth / 2;\n    const centerY = window.innerHeight / 2;\n    const mouseX = event.clientX;\n    const mouseY = event.clientY;\n    const deltaX = mouseX - centerX;\n    const deltaY = mouseY - centerY;\n    const normalizedX = deltaX / centerX;\n    const normalizedY = deltaY / centerY;\n    mousem.x = normalizedX / 300;\n    mousem.y = normalizedY / 300;\n  });\n  const fit = () => {\n    width = innerWidth;\n    height = innerHeight;\n    renderer.setSize(width, height);\n    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n    camera.fov = 2 * Math.atan(height / 2 / 10) * (180 / Math.PI);\n    camera.aspect = width / height;\n    camera.updateProjectionMatrix();\n    elemLeft = elem.getBoundingClientRect().left;\n    elemWidth = elem.getBoundingClientRect().width;\n    elemHeight = elem.getBoundingClientRect().height;\n    elemMesh.scale.set(elem.getBoundingClientRect().width, elem.getBoundingClientRect().height);\n    const size = new THREE.Vector3();\n    new THREE.Box3().setFromObject(elemMesh).getSize(size);\n    createCroppedTexture(sources, size.x / size.y, t).then(texture => {\n      texture.minFilter = THREE.LinearFilter;\n      texture.magFilter = THREE.LinearFilter;\n      elemMesh.material.uniforms.uTexture.value = texture;\n      t = texture;\n      elemMesh.visible = true;\n    }).catch(error => {\n      console.error(\"Error loading image:\", error);\n    });\n    uniforms.aspect.value = elemWidth / elemHeight;\n  };\n  let loaded = false;\n  function createCroppedTexture(sources, newAspect) {\n    let oldTextures = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    return Promise.all(sources.map((source, index) => {\n      return new Promise((resolve, reject) => {\n        if (source.nodeName.toLowerCase() === \"video\") {\n          source.onloadedmetadata = () => {\n            if (oldTextures[index]) {\n              oldTextures[index].dispose();\n            }\n            var videoTexture = new THREE.VideoTexture(source);\n            videoTexture.minFilter = THREE.LinearFilter;\n            videoTexture.magFilter = THREE.LinearFilter;\n            resolve(videoTexture);\n          };\n        } else {\n          function load() {\n            const imgWidth = source.width;\n            const imgHeight = source.height;\n            let newWidth, newHeight;\n            let xOffset = 0;\n            let yOffset = 0;\n            if (imgWidth / imgHeight > newAspect) {\n              newWidth = imgHeight * newAspect;\n              newHeight = imgHeight;\n              xOffset = (imgWidth - newWidth) / 2;\n            } else {\n              newWidth = imgWidth;\n              newHeight = imgWidth / newAspect;\n              yOffset = (imgHeight - newHeight) / 2;\n            }\n            const canvas = document.createElement(\"canvas\");\n            canvas.width = newWidth;\n            canvas.height = newHeight;\n            const ctx = canvas.getContext(\"2d\");\n            ctx.drawImage(source, xOffset, yOffset, newWidth, newHeight, 0, 0, newWidth, newHeight);\n            if (oldTextures[index]) {\n              oldTextures[index].dispose();\n            }\n            const newTexture = new THREE.Texture(canvas);\n            newTexture.needsUpdate = true;\n            resolve(newTexture);\n          }\n          if (loaded) load();\n          source.onload = () => {\n            load();\n            loaded = true;\n          };\n          source.onerror = error => {\n            reject(error);\n          };\n        }\n      });\n    }));\n  }\n  fit();\n  setTimeout(window.dispatchEvent(new Event(\"resize\")), 0);\n  addEventListener(\"resize\", fit);\n  const clock = new THREE.Clock();\n  function animate() {\n    elemMesh.position.y = -elem.getBoundingClientRect().top + height / 2 - elem.getBoundingClientRect().height / 2;\n    elemMesh.position.x = elem.getBoundingClientRect().left - width / 2 + elem.getBoundingClientRect().width / 2;\n    if (!opts.slideStyle) if (opts.gooey != true) staticScroll();\n    if (document.querySelector(o)) if (parseInt(document.querySelector(o).style.top) < 0) document.querySelector(o).style.top = \"0px\";\n    renderer.render(scene, camera);\n    Object.assign(uniforms, {\n      time: {\n        value: clock.getElapsedTime()\n      },\n      mouse: {\n        value: mouse\n      },\n      mousem: {\n        value: mousem\n      }\n    });\n    uniforms.mousei.value.x = THREE.MathUtils.lerp(uniforms.mousei.value.x, mouseCoords.x, .07);\n    uniforms.mousei.value.y = THREE.MathUtils.lerp(uniforms.mousei.value.y, mouseCoords.y, .07);\n    if (!opts.gooey || opts.slideStyle) doAction(uniforms.scrollLerp.value);\n    if (!isGooeyLerping) uniforms.uIntercept.value = THREE.MathUtils.lerp(uniforms.uIntercept.value, isMouseOverElemMesh ? 1 : 0, 0.07);\n    elemLeft = elem.getBoundingClientRect().left;\n    elemWidth = elem.getBoundingClientRect().width;\n    elemHeight = elem.getBoundingClientRect().height;\n    elemMesh.scale.set(elem.getBoundingClientRect().width, elem.getBoundingClientRect().height);\n    elemMesh.material.uniforms.time.value = clock.getElapsedTime();\n    if (getTranslate3d(elem)[2]) elemMesh.position.z = getTranslate3d(elem)[2];\n    requestAnimationFrame(animate);\n  }\n  attributes.uniforms.push(uniforms);\n  attributes.meshes.push(elemMesh);\n  return {\n    material,\n    debugObj,\n    controlKit,\n    panel,\n    animate,\n    elemMesh,\n    uniforms: elemMesh.material.uniforms\n  };\n};","map":{"version":3,"names":["THREE","ControlKit","ScrollPos","gsap","Expo","lerp","x","y","a","clamp","val","min","arguments","length","undefined","max","Math","fix","s","c","document","querySelector","querySelectorAll","forEach","e","i","style","width","parentElement","float","redraw","elemMesh","v","newGeometry","PlaneGeometry","geometry","parameters","height","dispose","getTranslate3d","el","values","transform","split","map","parseFloat","replace","stringify","obj","cache","str","JSON","key","value","indexOf","push","isdebug","init","elem","vertex","fragment","uniforms","attributes","camera","renderer","scene","opts","effect","o","elemWidth","getBoundingClientRect","elemHeight","elemLeft","left","mouse","Vector2","mousem","src","getAttribute","t","TextureLoader","load","sources","nodeName","toLowerCase","video","createElement","crossOrigin","muted","loop","preload","play","img","Image","doAction","currentScroll","uScroll","MathUtils","uSection","floor","sec","uTexture","mouseWheel","staticScroll","slideStyle","update","dampen","damping","speed","abs","scrollSpeed","touchSpeed","scrollTarget","scrollPos","scrollSnapping","snap","gooey","children","display","Object","assign","zindex","range","aspect","ignoreShapeAspect","shapePosition","shapeScale","shapeEdgeSoftness","shapeRadius","scrollLerp","infiniteGooey","growSize","durationOut","durationIn","time","displaceAmount","mousei","masker","maskVal","scrollType","uIntercept","geoVertex","noEffectGooey","onMouse","isMulti","noise_speed","metaball","discard_threshold","antialias_threshold","noise_height","noise_scale","snoise","shapeModifier","material","ShaderMaterial","transparent","vertexShader","fragmentShader","Mesh","scale","set","visible","add","debugObj","backgroundImage","shapeScaleX","shapeScaleY","shapeScaleR","shapePositionX","shapePositionY","shapePositionR","Mode","Trigo","Mouse","Active","scrollTypeIs","Color","precise","normal","rangep","frequency","Resolution_XY","pixelStrength","strength","f","controlKit","panel","config","parse","color","zIndex","preset","fetch","then","response","json","debug","addPanel","enable","label","fixed","position","addSubGroup","addCheckbox","addSlider","step","addGroup","addButton","resolution","rest","navigator","clipboard","writeText","pointerEvents","backgroundColor","setTimeout","addStringInput","onChange","addSelect","target","raycaster","Raycaster","mouseCoords","isMouseOverElemMesh","mover","event","setFromCamera","clientX","window","innerWidth","clientY","innerHeight","intersects","intersectObject","uv","addEventListener","isGooeyLerping","currentGooey","calculateGooey","l","setUniforms","originalGooey","button","to","duration","ease","easeInOut","onStart","onComplete","centerX","centerY","mouseX","mouseY","deltaX","deltaY","normalizedX","normalizedY","fit","setSize","setPixelRatio","devicePixelRatio","fov","atan","PI","updateProjectionMatrix","size","Vector3","Box3","setFromObject","getSize","createCroppedTexture","texture","minFilter","LinearFilter","magFilter","catch","error","console","loaded","newAspect","oldTextures","Promise","all","source","index","resolve","reject","onloadedmetadata","videoTexture","VideoTexture","imgWidth","imgHeight","newWidth","newHeight","xOffset","yOffset","canvas","ctx","getContext","drawImage","newTexture","Texture","needsUpdate","onload","onerror","dispatchEvent","Event","clock","Clock","animate","top","parseInt","render","getElapsedTime","z","requestAnimationFrame","meshes"],"sources":["/Users/jarvis/Desktop/Porfolio/KESHAV'S portfolio/Portfolio/node_modules/sheryjs/src/Utils.js"],"sourcesContent":["import * as THREE from \"three\"\r\nimport ControlKit from \"controlkit\"\r\nimport { ScrollPos } from \"./Effects\"\r\nimport gsap from \"gsap\"\r\nimport { Expo } from \"gsap/all\"\r\n\r\nexport const lerp = (x, y, a) => x * (1 - a) + y * a\r\n\r\nexport const clamp = (val, min = 1, max = 10) =>\r\n  Math.min(Math.max(val, min), max)\r\n\r\nexport const fix = () => {\r\n  const s =\r\n    \"#controlKit .panel .group-list .group .sub-group-list .sub-group .wrap .wrap\"\r\n  const c = \"#controlKit .panel .button, #controlKit .picker .button\"\r\n  if (document.querySelector(s))\r\n    document.querySelectorAll(s).forEach((e, i) => (e.style.width = i != 3 ? \"30%\" : \"50%\"))\r\n  if (document.querySelector(c)) {\r\n    document.querySelector(c).parentElement.style.float = \"none\"\r\n    document.querySelector(c).parentElement.style.width = \"100% \"\r\n  }\r\n  if (document.querySelector(s + \".color\"))\r\n    document.querySelector(s + \".color\").parentElement.style.width = \"60%\"\r\n}\r\n\r\nexport const redraw = (elemMesh, v) => {\r\n  let newGeometry = new THREE.PlaneGeometry(elemMesh.geometry.parameters.width, elemMesh.geometry.parameters.height, v, v)\r\n  elemMesh.geometry.dispose()\r\n  elemMesh.geometry = newGeometry\r\n}\r\n\r\nfunction getTranslate3d(el) {\r\n  var values = el.style.transform.split(/\\w+\\(|\\);?/)\r\n  if (!values[1] || !values[1].length) {\r\n    return []\r\n  }\r\n  values = values[1].split(/,\\s?/g)\r\n\r\n  return values.map(c => parseFloat(c.replace('px', '')))\r\n}\r\n\r\nfunction stringify(obj) {\r\n  let cache = []\r\n  let str = JSON.stringify(obj, function (key, value) {\r\n    if (typeof value === \"object\" && value !== null) {\r\n      if (cache.indexOf(value) !== -1) {\r\n        return\r\n      }\r\n      cache.push(value)\r\n    }\r\n    return value\r\n  })\r\n  cache = null\r\n  return str\r\n}\r\n\r\nvar isdebug = []\r\nexport const init = (\r\n  elem,\r\n  vertex,\r\n  fragment,\r\n  uniforms,\r\n  {\r\n    attributes,\r\n    camera,\r\n    renderer,\r\n    width,\r\n    height,\r\n    scene,\r\n    geometry,\r\n    opts,\r\n    effect = 0,\r\n  } = {}\r\n) => {\r\n  const o = \"#controlKit .options\"\r\n\r\n  let elemWidth = elem.getBoundingClientRect().width\r\n  let elemHeight = elem.getBoundingClientRect().height\r\n  let elemLeft = elem.getBoundingClientRect().left\r\n\r\n  const mouse = new THREE.Vector2()\r\n  const mousem = new THREE.Vector2()\r\n\r\n  const src = [elem.getAttribute(\"src\") && elem.getAttribute(\"src\")]\r\n  let t = [elem.getAttribute(\"src\") && new THREE.TextureLoader().load(src[0])]\r\n\r\n  const sources = []\r\n\r\n  if (elem.getAttribute(\"src\")) {\r\n    if (elem.nodeName.toLowerCase() === \"video\") {\r\n      const video = document.createElement('video')\r\n      video.crossOrigin = 'anonymous'\r\n      video.src = src[0]\r\n      video.muted = true\r\n      video.loop = true\r\n      video.preload = true\r\n      video.play()\r\n      sources[0] = video\r\n    } else {\r\n      const img = new Image()\r\n      img.crossOrigin = \"anonymous\"\r\n      img.src = src[0]\r\n      sources[0] = img\r\n    }\r\n  }\r\n  const doAction = (lerp) => {\r\n    if (uniforms.currentScroll.value >= 0) {\r\n      uniforms.uScroll.value = THREE.MathUtils.lerp(uniforms.uScroll.value, uniforms.currentScroll.value, lerp)\r\n      uniforms.uSection.value = Math.floor(uniforms.uScroll.value)\r\n      var sec = uniforms.uSection.value\r\n      if (t.length > sec) {\r\n        if (t.length > sec + 1)\r\n          uniforms.uTexture.value = [t[sec], t[sec + 1]]\r\n        else uniforms.uTexture.value = [t[t.length - 1], t[t.length - 1]]\r\n      }\r\n    }\r\n  }\r\n  var mouseWheel = new ScrollPos()\r\n  const staticScroll = () => {\r\n    if (!(elem.nodeName.toLowerCase() === \"img\") && !opts.slideStyle) {\r\n      mouseWheel.update()\r\n      mouseWheel.dampen = 0.9 + clamp(opts.damping || 7, 0, 9) / 100\r\n      mouseWheel.speed = Math.abs(opts.scrollSpeed || 6)\r\n      mouseWheel.touchSpeed = Math.abs(opts.touchSpeed || 6)\r\n      let scrollTarget =\r\n        Math.floor((mouseWheel.scrollPos + elemHeight * 0.5) / elemHeight) *\r\n        elemHeight\r\n      if (opts.scrollSnapping) {\r\n        mouseWheel.snap(scrollTarget)\r\n      }\r\n      let { scrollPos } = mouseWheel\r\n      if (scrollPos < 0) {\r\n        scrollPos = 0\r\n      }\r\n      if (scrollPos > 0 && scrollPos < elemHeight * (t.length - 1))\r\n        uniforms.currentScroll.value = scrollPos / elemHeight\r\n    }\r\n  }\r\n  if (!(elem.nodeName.toLowerCase() === \"img\")) {\r\n    fragment = fragment.replace(\r\n      \"!isMulti;\",\r\n      opts.gooey && !opts.slideStyle === true\r\n        ? /*glsl*/`       \r\n        vec2 pos=vec2(vuv.x,vuv.y/aspect);\r\n        vec2 mouse=vec2(mousei.x,(mousei.y)/aspect);\r\n        vec2 interpole=mix(vec2(0),vec2(metaball,noise_height),uIntercept);\r\n        float noise=(snoise(vec3(pos*noise_scale,time*noise_speed))+1.)/2.;\r\n        float val=noise*interpole.y;\r\n        float u=1.0-smoothstep(interpole.x,.0,distance(mouse,pos));\r\n        float mouseMetaball=clamp(1.-u,0.,1.);\r\n        val+=mouseMetaball;\r\n        float alpha=smoothstep(discard_threshold-antialias_threshold,discard_threshold,val);\r\n        gl_FragColor=vec4(mix(gl_FragColor,texture2D(uTexture[1],uv2),alpha));`\r\n\r\n        : `float c = (sin((uv.x*7.0*snoise(vec3(uv,1.0)))+(time))/15.0*snoise(vec3(uv,1.0)))+.01;\r\n      float blend=uScroll-uSection;float blend2=1.-blend;vec4 imageA=texture2D(uTexture[0],vec2(uv.x,uv.y-(((texture2D(uTexture[0],uv).r*displaceAmount)*blend)*2.)))*blend2;vec4 imageB=texture2D(uTexture[1],vec2(uv.x,uv.y+(((texture2D(uTexture[1],uv).r*displaceAmount)*blend2)*2.)))*blend;\r\n      gl_FragColor =scrollType == 0.0? mix(texture2D(uTexture[1], uv), texture2D(uTexture[0], uv), step((uScroll)-uSection, sin(c) + uv.y)):imageA.bbra*blend+imageA*blend2+imageB.bbra*blend2+imageB*blend;`\r\n    )\r\n    for (let i = 0; i < elem.children.length; i++) {\r\n      src[i] = elem.children[i].getAttribute(\"src\")\r\n      t[i] = new THREE.TextureLoader().load(src[i])\r\n      if (i > 0) {\r\n        elem.children[i].style.display = \"none\"\r\n      }\r\n      if (elem.children[i].nodeName.toLowerCase() === \"video\") {\r\n        const video = document.createElement('video')\r\n        video.crossOrigin = 'anonymous'\r\n        video.src = src[i]\r\n        video.muted = true\r\n        video.loop = true\r\n        video.preload = true\r\n        video.play()\r\n        sources[i] = video\r\n      } else {\r\n        const img = new Image()\r\n        img.crossOrigin = \"anonymous\"\r\n        img.src = src[i]\r\n        sources[i] = img\r\n      }\r\n    }\r\n  }\r\n  Object.assign(uniforms, {\r\n    zindex: { value: -9996999, range: [-9999999, 9999999] },\r\n    aspect: {\r\n      value: elemWidth / elemHeight,\r\n    },\r\n    ignoreShapeAspect: { value: true },\r\n    shapePosition: { value: new THREE.Vector2(0.0, 0.0)},\r\n    shapeScale: { value: new THREE.Vector2(0.5, 0.5) },\r\n    shapeEdgeSoftness: { value: 0.0, range: [0, .5] },\r\n    shapeRadius: { value: 0.0, range: [0, 2] },\r\n    currentScroll: { value: 0 },\r\n    scrollLerp: { value: 0.07 },\r\n    gooey: { value: opts.gooey ? true : false },\r\n    infiniteGooey: { value: false },\r\n    growSize: { value: 4, range: [1, 15] },\r\n    durationOut: { value: 1, range: [.1, 5] },\r\n    durationIn: { value: 1.5, range: [.1, 5] },\r\n    time: { value: 0 },\r\n    displaceAmount: { value: 0.5 },\r\n    mousei: { value: new THREE.Vector2() },\r\n    mouse: { value: mouse },\r\n    masker: { value: false },\r\n    maskVal: { value: 1, range: [1, 5] },\r\n    scrollType: { value: 0 },\r\n    uIntercept: { value: 0 },\r\n    geoVertex: {\r\n      range: [1, 64],\r\n      value: uniforms.geoVertex ? uniforms.geoVertex.value : 1,\r\n    },\r\n    noEffectGooey: { value: true },\r\n    onMouse: { value: 0 },\r\n    uSection: { value: 0 },\r\n    isMulti: { value: !(elem.nodeName.toLowerCase() === \"img\") },\r\n    uScroll: { value: 0 },\r\n    noise_speed: { value: 0.2, range: [0, 10] },\r\n    metaball: { value: .2, range: [0, 2] },\r\n    discard_threshold: { value: 0.5, range: [0, 1] },\r\n    antialias_threshold: { value: 0.002, range: [0, 0.1] },\r\n    noise_height: { value: 0.5, range: [0, 2] },\r\n    noise_scale: { value: 10, range: [0, 100] },\r\n    uTexture: {\r\n      value: elem.nodeName.toLowerCase() === \"img\" ? t : [t[0], t[1]],\r\n    },\r\n  })\r\n\r\n\r\n  \r\n  const snoise = `vec3 mod289(vec3 x){return x-floor(x*(1./289.))*289.;}vec4 mod289(vec4 x){return x-floor(x*(1./289.))*289.;}vec4 permute(vec4 x){return mod289(((x*34.)+1.)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1./6.,1./3.);const vec4 D=vec4(0.,.5,1.,2.);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.,i1.z,i2.z,1.))+i.y+vec4(0.,i1.y,i2.y,1.))+i.x+vec4(0.,i1.x,i2.x,1.));float n_=.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.+1.;vec4 s1=floor(b1)*2.+1.;vec4 sh=-step(h,vec4(0.));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.);m=m*m;return 42.*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}`\r\n  const shapeModifier = /*glsl*/`\r\n  uniform float shapeRadius,shapeEdgeSoftness;\r\n  uniform vec2  shapePosition,shapeScale; \r\n  uniform bool ignoreShapeAspect ;\r\n  void roundedBoxSDF() {\r\n    float asc=ignoreShapeAspect?aspect:1.0; \r\n    float distance = length(max(abs((vec2(vuv.x,vuv.y/asc))-vec2(shapePosition.x,shapePosition.y/asc)*1.5-vec2(.5,.5/asc)) - vec2(shapeScale.x,shapeScale.y/asc) + shapeRadius, 0.0)) - shapeRadius;\r\n    float smoothedAlpha = 1.0-smoothstep(0.0, shapeEdgeSoftness/10., distance);    \r\n    gl_FragColor = vec4(gl_FragColor.xyz, smoothedAlpha);}\r\n  `\r\n  const material = new THREE.ShaderMaterial({\r\n    transparent: true,\r\n    vertexShader: vertex.replace(\"#define SNOISEHOLDER\", snoise),\r\n    fragmentShader: fragment.replace(\"#define SNOISEHOLDER\", snoise).replace(\"#define SHAPEMODIFIER\", shapeModifier),\r\n    uniforms,\r\n  })\r\n\r\n  const elemMesh = new THREE.Mesh(geometry, material)\r\n  elemMesh.scale.set(elemWidth, elemHeight)\r\n  redraw(elemMesh, uniforms.geoVertex.value)\r\n  elemMesh.visible = false\r\n  scene.add(elemMesh)\r\n\r\n  var debugObj = {\r\n    backgroundImage: '',\r\n    shapePosition: [0, 0],\r\n    shapeScaleX: .5,\r\n    shapeScaleY: .5,\r\n    shapeScaleR: [0, 1],\r\n    shapePositionX: .0,\r\n    shapePositionY: .0,\r\n    shapePositionR: [-2, 2],\r\n\r\n    Mode: [\r\n      \"Off\",\r\n      \"Reflect/Glow\",\r\n      \"Exclusion\",\r\n      \"Difference\",\r\n      \"Darken\",\r\n      \"ColorBurn\",\r\n      \"ColorDoge\",\r\n      \"SoftLight\",\r\n      \"Overlay\",\r\n      \"Phoenix\",\r\n      \"Add\",\r\n      \"Multiply\",\r\n      \"Screen\",\r\n      \"Negative\",\r\n      \"Divide\",\r\n      \"Subtract\",\r\n      \"Neon\",\r\n      \"Natural\",\r\n      \"Mod\",\r\n      \"NeonNegative\",\r\n      \"Dark\",\r\n      \"Average\",\r\n    ],\r\n    \"Mode Active\": \"Soft Light\",\r\n    Trigo: [\"Sin\", \"Cos\", \"Tan\", \"Atan\"],\r\n    \"Trig A\": \"Cos\",\r\n    \"Trig N\": \"Sin\",\r\n    Mouse: [\"Off\", \"Mode 1\", \" Mode 2\", \" Mode 3\"],\r\n    onMouse: [\"Always Active\", \"Active On Hover\", \"Deactivate On Hover\"],\r\n    Active: \"Always Active\",\r\n    scrollType: [\"Wave\", \"Morph\"],\r\n    scrollTypeIs: \"Wave\",\r\n    \"Mouse Active\": \"Off\",\r\n    Color: \"#54A8FF\",\r\n    speed: { precise: 1, normal: 1, range: [-500, 500], rangep: [-10, 10] },\r\n    frequency: {\r\n      precise: 1,\r\n      normal: 50,\r\n      range: [-800, 800],\r\n      rangep: [-50, 50],\r\n    },\r\n    Resolution_XY: {\r\n      value: 1000,\r\n      range: [0, 1000],\r\n      precise: 1,\r\n      rangep: [0, 100],\r\n    },\r\n    pixelStrength: {\r\n      precise: 1,\r\n      normal: 3,\r\n      range: [-20, 100],\r\n      rangep: [-20, 20],\r\n    },\r\n    strength: { precise: 1, normal: 0.2, range: [-40, 40], rangep: [-5, 5] },\r\n    s: 0.6,\r\n    range: [0.1, 1],\r\n    f: 0.6,\r\n    rangep: [1, 10],\r\n  }\r\n\r\n  var controlKit = null\r\n  var panel = null\r\n\r\n  const config = (c) => {\r\n    c = JSON.parse(JSON.stringify(c))\r\n    Object.assign(uniforms, c)\r\n    if (c.color) c.color.value = new THREE.Color(c.color.value)\r\n    Object.assign(uniforms, c)\r\n    document.querySelector('._canvas_container').style.zIndex = uniforms.zindex.value\r\n  }\r\n\r\n  if (opts.preset)\r\n    fetch(opts.preset)\r\n      .then((response) => response.json())\r\n      .then((json) => config(json))\r\n  if (opts.config) config(opts.config)\r\n\r\n  if ((opts.debug && !isdebug[effect]) || false) {\r\n    isdebug[effect] = true\r\n    controlKit = new ControlKit()\r\n\r\n    if (opts.gooey === true) {\r\n      controlKit\r\n        .addPanel({\r\n          enable: false,\r\n          label: \"Gooey Panel\",\r\n          width: 300,\r\n          fixed: false,\r\n          position: [20, 50],\r\n        })\r\n        .addSubGroup({ label: 'InfiniteGooey', enable: false })\r\n        .addCheckbox(uniforms.infiniteGooey, \"value\", {\r\n          label: \"Enable\",\r\n        })\r\n        .addSlider(uniforms.growSize, \"value\", \"range\", {\r\n          label: \"Grow Size\",\r\n          step: 0.001,\r\n        })\r\n        .addSlider(uniforms.durationOut, \"value\", \"range\", {\r\n          label: \"Duration Out\",\r\n          step: 0.001,\r\n        })\r\n        .addSlider(uniforms.durationIn, \"value\", \"range\", {\r\n          label: \"Duration In\",\r\n          step: 0.001,\r\n        })\r\n        .addGroup()\r\n        .addCheckbox(uniforms.noEffectGooey, \"value\", {\r\n          label: \"GooeyBakEffect\",\r\n        })\r\n        .addSlider(uniforms.noise_speed, \"value\", \"range\", {\r\n          label: \"Speed\",\r\n          step: 0.001,\r\n        })\r\n        .addSlider(uniforms.metaball, \"value\", \"range\", {\r\n          label: \"GooeyBall\",\r\n          step: 0.001,\r\n        })\r\n        .addSlider(uniforms.discard_threshold, \"value\", \"range\", {\r\n          label: \"Threshold\",\r\n          step: 0.001,\r\n        })\r\n        .addSlider(uniforms.antialias_threshold, \"value\", \"range\", {\r\n          label: \"Antialias\",\r\n          step: 0.001,\r\n        })\r\n        .addSlider(uniforms.noise_height, \"value\", \"range\", {\r\n          label: \"Height\",\r\n          step: 0.001,\r\n        })\r\n        .addSlider(uniforms.noise_scale, \"value\", \"range\", {\r\n          label: \"Scale\",\r\n          step: 0.001,\r\n        })\r\n    }\r\n\r\n    panel = controlKit\r\n      .addPanel({\r\n        enable: false,\r\n        label: \"Debug Panel\",\r\n        fixed: false,\r\n        position: [20, 10],\r\n        width: 300,\r\n      })\r\n      .addButton(\"Save To Clipboard\", () => {\r\n        const {\r\n          uScroll,\r\n          isMulti,\r\n          uSection,\r\n          time,\r\n          resolution,\r\n          uTexture,\r\n          mouse,\r\n          mousem,\r\n          mousei,\r\n          uIntercept,\r\n          ...rest\r\n        } = uniforms\r\n        navigator.clipboard.writeText(stringify(rest)).then(\r\n          () => {\r\n            document.querySelector('#controlKit .panel .button, #controlKit .picker .button').value = \"Copied Successfully\"\r\n            document.querySelector('#controlKit .panel .button, #controlKit .picker .button').style.pointerEvents = \"none\"\r\n            document.querySelector('body #controlKit .panel .button, #controlKit .picker .button').style.backgroundColor = \"darkgreen\"\r\n            document.querySelector('body #controlKit .panel .button, #controlKit .picker .button').style.color = \"white\"\r\n            setTimeout(() => {\r\n              document.querySelector('#controlKit .panel .button, #controlKit .picker .button').value = \"Save To Clipboard\"\r\n              document.querySelector('#controlKit .panel .button, #controlKit .picker .button').style.pointerEvents = \"initial\"\r\n              document.querySelector('body #controlKit .panel .button, #controlKit .picker .button').style.backgroundColor = \"#383c4a\"\r\n              document.querySelector('body #controlKit .panel .button, #controlKit .picker .button').style.color = \"#8c92a4\"\r\n            }, 1500)\r\n          },\r\n          () => {\r\n            document.querySelector('#controlKit .panel .button, #controlKit .picker .button').value = \"Failed To Copy\"\r\n            document.querySelector('#controlKit .panel .button, #controlKit .picker .button').style.pointerEvents = \"none\"\r\n            document.querySelector('body #controlKit .panel .button, #controlKit .picker .button').style.backgroundColor = \"red\"\r\n            document.querySelector('body #controlKit .panel .button, #controlKit .picker .button').style.color = \"white\"\r\n            setTimeout(() => {\r\n              document.querySelector('#controlKit .panel .button, #controlKit .picker .button').value = \"Save To Clipboard\"\r\n              document.querySelector('#controlKit .panel .button, #controlKit .picker .button').style.pointerEvents = \"initial\"\r\n              document.querySelector('body #controlKit .panel .button, #controlKit .picker .button').style.backgroundColor = \"#383c4a\"\r\n              document.querySelector('body #controlKit .panel .button, #controlKit .picker .button').style.color = \"#8c92a4\"\r\n            }, 1500)\r\n          },\r\n        )\r\n      })\r\n      .addStringInput(uniforms.zindex, \"value\", {\r\n        label: \"Canvas Z-Index\",\r\n        step: 1,\r\n        onChange: () => (document.querySelector('._canvas_container').style.zIndex = uniforms.zindex.value),\r\n      })\r\n      .addSubGroup({ label: 'Shape Control', enable: false })\r\n      .addCheckbox(uniforms.ignoreShapeAspect,'value', { label: 'Ignore Shape Aspect' })\r\n      .addSlider(uniforms.shapeRadius, \"value\", \"range\", {\r\n        label: \"Radius\",\r\n        step: 0.001,\r\n      })\r\n      .addSlider(uniforms.shapeEdgeSoftness, \"value\", \"range\", {\r\n        label: \"Edge Softness\",\r\n        step: 0.001,\r\n      })\r\n      .addSlider(debugObj, \"shapeScaleX\", \"shapeScaleR\", {\r\n        label: \"Scale X\",\r\n        step: 0.001,\r\n        onChange: () => uniforms.shapeScale.value.x = debugObj.shapeScaleX\r\n      })\r\n      .addSlider(debugObj, \"shapeScaleY\", \"shapeScaleR\", {\r\n        label: \"Scale Y\",\r\n        step: 0.001,\r\n        onChange: () => uniforms.shapeScale.value.y = debugObj.shapeScaleY\r\n      })\r\n      .addSlider(debugObj, \"shapePositionX\", \"shapePositionR\", {\r\n        label: \"Position X\",\r\n        step: 0.001,\r\n        onChange: () => uniforms.shapePosition.value.x = debugObj.shapePositionX\r\n      })\r\n      .addSlider(debugObj, \"shapePositionY\", \"shapePositionR\", {\r\n        label: \"Position Y\",\r\n        step: 0.001,\r\n        onChange: () => uniforms.shapePosition.value.y = debugObj.shapePositionY\r\n      })\r\n\r\n      .addGroup()\r\n    document.querySelector('body #controlKit .panel .button, #controlKit .picker .button').style.color = \"#8c92a4\"\r\n    if (!(elem.nodeName.toLowerCase() === \"img\") && opts.gooey != true)\r\n      panel.addSelect(debugObj, \"scrollType\", {\r\n        target: \"scrollTypeIs\",\r\n        label: \"Scroll Type\",\r\n        onChange: (x) => (uniforms.scrollType.value = x),\r\n      })\r\n    panel\r\n      .addCheckbox(uniforms.masker, \"value\", {\r\n        label: \"Image Zoomer\",\r\n      })\r\n      .addSlider(uniforms.maskVal, \"value\", \"range\", {\r\n        label: \"Zoom level\",\r\n        step: 0.00001,\r\n      })\r\n  }\r\n\r\n  const raycaster = new THREE.Raycaster()\r\n  let mouseCoords = new THREE.Vector2(0.5, 0.5)\r\n\r\n  let isMouseOverElemMesh = false\r\n\r\n  const mover = (event) => {\r\n    raycaster.setFromCamera(new THREE.Vector2((event.clientX / window.innerWidth) * 2 - 1, -(event.clientY / window.innerHeight) * 2 + 1), camera)\r\n\r\n    const intersects = raycaster.intersectObject(elemMesh)\r\n\r\n    if (intersects.length > 0) {\r\n      mouseCoords = intersects[0].uv\r\n      mouse.x = (intersects[0].uv.x) * 2 - 1\r\n      mouse.y = -(intersects[0].uv.y) * 2 - 1\r\n\r\n      if (!isMouseOverElemMesh)\r\n        isMouseOverElemMesh = true\r\n    } else if (isMouseOverElemMesh) {\r\n      isMouseOverElemMesh = false\r\n    }\r\n  }\r\n\r\n  let scrollPos = null\r\n  document.addEventListener(\"mousemove\", mover)\r\n  document.addEventListener(\"wheel\", mover)\r\n  // document.addEventListener(\"wheel\", (e) => {\r\n  //   console.log(scrollPos != scrollY, scrollY)\r\n  //   if (scrollPos != scrollY) {\r\n  //     if (e.deltaY > 0 || !scrollPos) {\r\n  //       scrollPos = scrollY\r\n  //       mouseCoords.y -= e.deltaY / window.innerHeight\r\n  //     }\r\n  //   }\r\n  // })\r\n  let isGooeyLerping = false\r\n  let currentGooey = 0\r\n\r\n  function calculateGooey(i) {\r\n    var l = src.length\r\n    return i % l\r\n  }\r\n\r\n  if (opts.slideStyle && typeof opts.slideStyle === \"function\")\r\n    opts.slideStyle((x) => uniforms.currentScroll.value = x, (y) => uniforms.scrollLerp.value = y)\r\n  if (opts.setUniforms && typeof opts.setUniforms === \"function\")\r\n    opts.setUniforms(uniforms)\r\n\r\n  const originalGooey = uniforms.metaball.value\r\n  elem.addEventListener('mousedown', (e) => {\r\n    if ((e.button == 0) && !isGooeyLerping && uniforms.infiniteGooey.value && opts.gooey && !opts.slideStyle) {\r\n      gsap.to(uniforms.metaball, {\r\n        value: uniforms.growSize.value,\r\n        duration: uniforms.durationOut.value,\r\n        ease: Expo.easeInOut,\r\n        onStart: () => {\r\n          isGooeyLerping = true\r\n        },\r\n        onComplete: () => {\r\n          currentGooey++\r\n          uniforms.metaball.value = 0\r\n          isGooeyLerping = false\r\n          uniforms.uTexture.value = [t[calculateGooey(currentGooey)], t[calculateGooey(currentGooey + 1)]]\r\n          gsap.to(uniforms.metaball, {\r\n            value: originalGooey,\r\n            ease: Expo.easeInOut,\r\n            duration: uniforms.durationIn.value\r\n          })\r\n        }\r\n      })\r\n    }\r\n  })\r\n\r\n\r\n  document.addEventListener(\"mousemove\", (e) => {\r\n    const centerX = window.innerWidth / 2\r\n    const centerY = window.innerHeight / 2\r\n    const mouseX = event.clientX\r\n    const mouseY = event.clientY\r\n\r\n    const deltaX = mouseX - centerX\r\n    const deltaY = mouseY - centerY\r\n\r\n    const normalizedX = deltaX / centerX\r\n    const normalizedY = deltaY / centerY\r\n\r\n    mousem.x = normalizedX / 300\r\n    mousem.y = normalizedY / 300\r\n  })\r\n\r\n\r\n\r\n  const fit = () => {\r\n    width = innerWidth\r\n    height = innerHeight\r\n\r\n    renderer.setSize(width, height)\r\n    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2))\r\n\r\n    camera.fov = 2 * Math.atan(height / 2 / 10) * (180 / Math.PI)\r\n\r\n    camera.aspect = width / height\r\n    camera.updateProjectionMatrix()\r\n\r\n    elemLeft = elem.getBoundingClientRect().left\r\n    elemWidth = elem.getBoundingClientRect().width\r\n    elemHeight = elem.getBoundingClientRect().height\r\n\r\n    elemMesh.scale.set(\r\n      elem.getBoundingClientRect().width,\r\n      elem.getBoundingClientRect().height\r\n    )\r\n\r\n    const size = new THREE.Vector3()\r\n    new THREE.Box3().setFromObject(elemMesh).getSize(size)\r\n    createCroppedTexture(sources, size.x / size.y, t)\r\n      .then((texture) => {\r\n        texture.minFilter = THREE.LinearFilter\r\n        texture.magFilter = THREE.LinearFilter\r\n        elemMesh.material.uniforms.uTexture.value = texture\r\n        t = texture\r\n        elemMesh.visible = true\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error loading image:\", error)\r\n      })\r\n    uniforms.aspect.value = elemWidth / elemHeight\r\n  }\r\n  let loaded = false\r\n  function createCroppedTexture(sources, newAspect, oldTextures = []) {\r\n    return Promise.all(\r\n      sources.map((source, index) => {\r\n        return new Promise((resolve, reject) => {\r\n          if (source.nodeName.toLowerCase() === \"video\") {\r\n            source.onloadedmetadata = () => {\r\n              if (oldTextures[index]) {\r\n                oldTextures[index].dispose()\r\n              }\r\n              var videoTexture = new THREE.VideoTexture(source)\r\n              videoTexture.minFilter = THREE.LinearFilter\r\n              videoTexture.magFilter = THREE.LinearFilter\r\n              resolve(videoTexture)\r\n            }\r\n          } else {\r\n            function load() {\r\n              const imgWidth = source.width\r\n              const imgHeight = source.height\r\n              let newWidth, newHeight\r\n              let xOffset = 0\r\n              let yOffset = 0\r\n\r\n              if (imgWidth / imgHeight > newAspect) {\r\n                newWidth = imgHeight * newAspect\r\n                newHeight = imgHeight\r\n                xOffset = (imgWidth - newWidth) / 2\r\n              } else {\r\n                newWidth = imgWidth\r\n                newHeight = imgWidth / newAspect\r\n                yOffset = (imgHeight - newHeight) / 2\r\n              }\r\n\r\n              const canvas = document.createElement(\"canvas\")\r\n              canvas.width = newWidth\r\n              canvas.height = newHeight\r\n              const ctx = canvas.getContext(\"2d\")\r\n              ctx.drawImage(\r\n                source,\r\n                xOffset,\r\n                yOffset,\r\n                newWidth,\r\n                newHeight,\r\n                0,\r\n                0,\r\n                newWidth,\r\n                newHeight\r\n              )\r\n\r\n              if (oldTextures[index]) {\r\n                oldTextures[index].dispose()\r\n              }\r\n\r\n              const newTexture = new THREE.Texture(canvas)\r\n              newTexture.needsUpdate = true\r\n              resolve(newTexture)\r\n            }\r\n            if (loaded) load()\r\n            source.onload = () => {\r\n              load()\r\n              loaded = true\r\n            }\r\n            source.onerror = (error) => {\r\n              reject(error)\r\n            }\r\n          }\r\n        })\r\n      })\r\n    )\r\n  }\r\n\r\n  fit()\r\n  setTimeout(window.dispatchEvent(new Event(\"resize\")), 0)\r\n  addEventListener(\"resize\", fit)\r\n\r\n\r\n  const clock = new THREE.Clock()\r\n  function animate() {\r\n    elemMesh.position.y = -elem.getBoundingClientRect().top + height / 2 - elem.getBoundingClientRect().height / 2\r\n    elemMesh.position.x = elem.getBoundingClientRect().left - width / 2 + elem.getBoundingClientRect().width / 2\r\n    if (!opts.slideStyle) if (opts.gooey != true) staticScroll()\r\n\r\n    if (document.querySelector(o))\r\n      if (parseInt(document.querySelector(o).style.top) < 0)\r\n        document.querySelector(o).style.top = \"0px\"\r\n\r\n    renderer.render(scene, camera)\r\n\r\n    Object.assign(uniforms, {\r\n      time: { value: clock.getElapsedTime() },\r\n      mouse: { value: mouse },\r\n      mousem: { value: mousem },\r\n    })\r\n\r\n    uniforms.mousei.value.x = THREE.MathUtils.lerp(uniforms.mousei.value.x, mouseCoords.x, .07)\r\n    uniforms.mousei.value.y = THREE.MathUtils.lerp(uniforms.mousei.value.y, mouseCoords.y, .07)\r\n    if (!opts.gooey || opts.slideStyle)\r\n      doAction(uniforms.scrollLerp.value)\r\n\r\n\r\n    if (!isGooeyLerping)\r\n      uniforms.uIntercept.value = THREE.MathUtils.lerp(\r\n        uniforms.uIntercept.value,\r\n        isMouseOverElemMesh ? 1 : 0,\r\n        0.07\r\n      )\r\n\r\n    elemLeft = elem.getBoundingClientRect().left\r\n    elemWidth = elem.getBoundingClientRect().width\r\n    elemHeight = elem.getBoundingClientRect().height\r\n\r\n\r\n    elemMesh.scale.set(\r\n      elem.getBoundingClientRect().width,\r\n      elem.getBoundingClientRect().height\r\n    )\r\n\r\n    elemMesh.material.uniforms.time.value = clock.getElapsedTime()\r\n    if (getTranslate3d(elem)[2])\r\n      elemMesh.position.z = getTranslate3d(elem)[2]\r\n\r\n\r\n    requestAnimationFrame(animate)\r\n  }\r\n\r\n  attributes.uniforms.push(uniforms)\r\n  attributes.meshes.push(elemMesh)\r\n  return {\r\n    material,\r\n    debugObj,\r\n    controlKit,\r\n    panel,\r\n    animate,\r\n    elemMesh,\r\n    uniforms: elemMesh.material.uniforms,\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}