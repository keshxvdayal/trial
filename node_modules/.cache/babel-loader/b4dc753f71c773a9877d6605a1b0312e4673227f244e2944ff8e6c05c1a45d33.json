{"ast":null,"code":"var ObjectComponent = require('../core/ObjectComponent');\nvar Node = require('../core/document/Node');\nvar CSS = require('../core/document/CSS');\nvar Options = require('./Options');\nvar ButtonPreset = require('./ButtonPreset');\nvar Metric = require('./Metric');\nvar Event_ = require('../core/event/Event'),\n  DocumentEvent = require('../core/document/DocumentEvent'),\n  NodeEvent = require('../core/document/NodeEvent'),\n  ComponentEvent = require('../core/ComponentEvent');\nvar DEFAULT_PRESET = null;\nfunction StringInput(parent, object, value, params) {\n  ObjectComponent.apply(this, arguments);\n  params = params || {};\n  params.onChange = params.onChange || this._onChange;\n  params.presets = params.presets || DEFAULT_PRESET;\n  this._onChange = params.onChange;\n  var input = this._input = new Node(Node.INPUT_TEXT);\n  var wrap = this._wrapNode;\n  var presets = params.presets;\n  if (!presets) {\n    wrap.addChild(input);\n  } else {\n    var wrap_ = new Node();\n    wrap_.setStyleClass(CSS.WrapInputWPreset);\n    wrap.addChild(wrap_);\n    wrap_.addChild(input);\n    var options = Options.get(),\n      btnPreset = new ButtonPreset(this._wrapNode);\n    var onPresetDeactivate = function () {\n      options.clear();\n      btnPreset.deactivate();\n    };\n    var self = this;\n    var onPresetActivate = function () {\n      options.build(presets, input.getProperty('value'), input, function () {\n        input.setProperty('value', presets[options.getSelectedIndex()]);\n        self.pushHistoryState();\n        self.applyValue();\n      }, onPresetDeactivate, Metric.PADDING_PRESET, false);\n    };\n    btnPreset.setOnActive(onPresetActivate);\n    btnPreset.setOnDeactive(onPresetDeactivate);\n  }\n  input.setProperty('value', this._obj[this._key]);\n  input.addEventListener(NodeEvent.KEY_UP, this._onInputKeyUp.bind(this));\n  input.addEventListener(NodeEvent.CHANGE, this._onInputChange.bind(this));\n  input.addEventListener(NodeEvent.MOUSE_DOWN, this._onInputDragStart.bind(this));\n  this.addEventListener(ComponentEvent.INPUT_SELECT_DRAG, this._parent, 'onComponentSelectDrag');\n}\nStringInput.prototype = Object.create(ObjectComponent.prototype);\nStringInput.prototype.constructor = StringInput;\nStringInput.prototype._onInputKeyUp = function (e) {\n  if (this._keyIsChar(e.keyCode)) {\n    this.pushHistoryState();\n  }\n  this.applyValue();\n  this._onChange();\n};\nStringInput.prototype._onInputChange = function (e) {\n  if (this._keyIsChar(e.keyCode)) {\n    this.pushHistoryState();\n  }\n  this.applyValue();\n};\n\n//TODO: Finish check\nStringInput.prototype._keyIsChar = function (keyCode) {\n  return keyCode != 17 && keyCode != 18 && keyCode != 20 && keyCode != 37 && keyCode != 38 && keyCode != 39 && keyCode != 40 && keyCode != 16;\n};\nStringInput.prototype.applyValue = function () {\n  this._obj[this._key] = this._input.getProperty('value');\n  this.dispatchEvent(new Event_(this, ComponentEvent.VALUE_UPDATED, null));\n};\nStringInput.prototype.onValueUpdate = function (e) {\n  if (e.data.origin == this) return;\n  this._input.setProperty('value', this._obj[this._key]);\n};\n\n//Prevent chrome select drag\nStringInput.prototype._onInputDragStart = function () {\n  var eventMove = DocumentEvent.MOUSE_MOVE,\n    eventUp = DocumentEvent.MOUSE_UP;\n  var event = ComponentEvent.INPUT_SELECT_DRAG;\n  var self = this;\n  var onDrag = function () {\n      self.dispatchEvent(new Event_(this, event, null));\n    },\n    onDragFinish = function () {\n      self.dispatchEvent(new Event_(this, event, null));\n      document.removeEventListener(eventMove, onDrag, false);\n      document.removeEventListener(eventMove, onDragFinish, false);\n    };\n  this.dispatchEvent(new Event_(this, event, null));\n  document.addEventListener(eventMove, onDrag, false);\n  document.addEventListener(eventUp, onDragFinish, false);\n};\nmodule.exports = StringInput;","map":{"version":3,"names":["ObjectComponent","require","Node","CSS","Options","ButtonPreset","Metric","Event_","DocumentEvent","NodeEvent","ComponentEvent","DEFAULT_PRESET","StringInput","parent","object","value","params","apply","arguments","onChange","_onChange","presets","input","_input","INPUT_TEXT","wrap","_wrapNode","addChild","wrap_","setStyleClass","WrapInputWPreset","options","get","btnPreset","onPresetDeactivate","clear","deactivate","self","onPresetActivate","build","getProperty","setProperty","getSelectedIndex","pushHistoryState","applyValue","PADDING_PRESET","setOnActive","setOnDeactive","_obj","_key","addEventListener","KEY_UP","_onInputKeyUp","bind","CHANGE","_onInputChange","MOUSE_DOWN","_onInputDragStart","INPUT_SELECT_DRAG","_parent","prototype","Object","create","constructor","e","_keyIsChar","keyCode","dispatchEvent","VALUE_UPDATED","onValueUpdate","data","origin","eventMove","MOUSE_MOVE","eventUp","MOUSE_UP","event","onDrag","onDragFinish","document","removeEventListener","module","exports"],"sources":["/Users/jarvis/Desktop/Porfolio/KESHAV'S portfolio/Portfolio/node_modules/controlkit/lib/component/StringInput.js"],"sourcesContent":["var ObjectComponent = require('../core/ObjectComponent');\nvar Node = require('../core/document/Node');\nvar CSS = require('../core/document/CSS');\nvar Options = require('./Options');\nvar ButtonPreset = require('./ButtonPreset');\nvar Metric = require('./Metric');\n\nvar Event_ = require('../core/event/Event'),\n    DocumentEvent = require('../core/document/DocumentEvent'),\n    NodeEvent = require('../core/document/NodeEvent'),\n    ComponentEvent =  require('../core/ComponentEvent');\n\nvar DEFAULT_PRESET = null;\n\nfunction StringInput(parent,object,value,params) {\n    ObjectComponent.apply(this,arguments);\n\n    params          = params || {};\n    params.onChange = params.onChange || this._onChange;\n    params.presets  = params.presets  || DEFAULT_PRESET;\n\n    this._onChange   = params.onChange;\n\n    var input = this._input = new Node(Node.INPUT_TEXT);\n\n    var wrap = this._wrapNode;\n\n    var presets = params.presets;\n    if (!presets) {\n        wrap.addChild(input);\n    }\n    else {\n        var wrap_ = new Node();\n        wrap_.setStyleClass(CSS.WrapInputWPreset);\n\n        wrap.addChild(wrap_);\n        wrap_.addChild(input);\n\n        var options = Options.get(),\n            btnPreset = new ButtonPreset(this._wrapNode);\n\n        var onPresetDeactivate = function () {\n            options.clear();\n            btnPreset.deactivate();\n        };\n\n        var self = this;\n        var onPresetActivate = function () {\n            options.build(presets,\n                input.getProperty('value'),\n                input,\n                function () {\n                    input.setProperty('value', presets[options.getSelectedIndex()]);\n                    self.pushHistoryState();\n                    self.applyValue();\n                },\n                onPresetDeactivate,\n                Metric.PADDING_PRESET,\n                false);\n        };\n\n        btnPreset.setOnActive(onPresetActivate);\n        btnPreset.setOnDeactive(onPresetDeactivate)\n    }\n\n    input.setProperty('value',this._obj[this._key]);\n\n    input.addEventListener(NodeEvent.KEY_UP, this._onInputKeyUp.bind(this));\n    input.addEventListener(NodeEvent.CHANGE, this._onInputChange.bind(this));\n\n    input.addEventListener(NodeEvent.MOUSE_DOWN, this._onInputDragStart.bind(this));\n    this.addEventListener(ComponentEvent.INPUT_SELECT_DRAG,this._parent,'onComponentSelectDrag');\n}\nStringInput.prototype = Object.create(ObjectComponent.prototype);\nStringInput.prototype.constructor = StringInput;\n\nStringInput.prototype._onInputKeyUp = function (e) {\n    if (this._keyIsChar(e.keyCode)){\n        this.pushHistoryState();\n    }\n    this.applyValue();\n    this._onChange();\n};\n\nStringInput.prototype._onInputChange = function (e) {\n    if (this._keyIsChar(e.keyCode)){\n        this.pushHistoryState();\n    }\n    this.applyValue();\n};\n\n//TODO: Finish check\nStringInput.prototype._keyIsChar = function (keyCode) {\n    return keyCode != 17 &&\n        keyCode != 18 &&\n        keyCode != 20 &&\n        keyCode != 37 &&\n        keyCode != 38 &&\n        keyCode != 39 &&\n        keyCode != 40 &&\n        keyCode != 16;\n};\n\n\nStringInput.prototype.applyValue = function () {\n    this._obj[this._key] = this._input.getProperty('value');\n    this.dispatchEvent(new Event_(this, ComponentEvent.VALUE_UPDATED, null));\n};\n\nStringInput.prototype.onValueUpdate = function (e) {\n    if (e.data.origin == this)return;\n    this._input.setProperty('value', this._obj[this._key]);\n};\n\n//Prevent chrome select drag\nStringInput.prototype._onInputDragStart = function () {\n    var eventMove = DocumentEvent.MOUSE_MOVE,\n        eventUp = DocumentEvent.MOUSE_UP;\n\n    var event = ComponentEvent.INPUT_SELECT_DRAG;\n    var self = this;\n    var onDrag = function () {\n            self.dispatchEvent(new Event_(this, event, null));\n        },\n\n        onDragFinish = function () {\n            self.dispatchEvent(new Event_(this, event, null));\n\n            document.removeEventListener(eventMove, onDrag, false);\n            document.removeEventListener(eventMove, onDragFinish, false);\n        };\n\n    this.dispatchEvent(new Event_(this, event, null));\n\n    document.addEventListener(eventMove, onDrag, false);\n    document.addEventListener(eventUp, onDragFinish, false);\n};\n\nmodule.exports = StringInput;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}